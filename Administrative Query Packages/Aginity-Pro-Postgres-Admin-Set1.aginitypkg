{"entities":[{"fqn":"/Community Queries","id":"067ce53b-d1d2-431a-9f3d-4765eb18eebf","parent_folder_id":"bb6de4af-1aad-493e-a9ee-b3e75cf58ed7","name":"Community Queries","entity_type":"FOLDER"},{"fqn":"/Community Queries/Postgres/Administrative Queries/View dependency","id":"130bf4d5-3b1c-4c4e-b87d-65b632777622","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"View dependency","entity_type":"SQL_ENTITY","description":"","content":"with recursive view_tree(parent_schema, parent_obj, child_schema, child_obj, ind, ord) as \r\n(\r\n  select \r\n    vtu_parent.view_schema, vtu_parent.view_name, \r\n    vtu_parent.table_schema, vtu_parent.table_name, \r\n    '', \r\n    array[row_number() over (order by view_schema, view_name)]\r\n  from \r\n    information_schema.view_table_usage vtu_parent\r\n  where\r\n    1=1\r\n    --and vtu_parent.view_schema = $schema_name \r\n    and vtu_parent.view_name = $view_name\r\n  union all\r\n  select \r\n    vtu_child.view_schema, vtu_child.view_name, \r\n    vtu_child.table_schema, vtu_child.table_name, \r\n    vtu_parent.ind || '  ', \r\n    vtu_parent.ord || (row_number() over (order by view_schema, view_name))\r\n  from \r\n    view_tree vtu_parent \r\n    join information_schema.view_table_usage vtu_child \r\n      on vtu_child.view_schema = vtu_parent.child_schema \r\n          and vtu_child.view_name = vtu_parent.child_obj\r\n) \r\nselect \r\n  tree.ind || tree.parent_schema || '.' || tree.parent_obj || ' depends on ' || tree.child_schema || '.' || tree.child_obj as dependency_info\r\n  , tree.ord\r\nfrom \r\n  view_tree tree\r\norder by \r\n  ord","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.884Z","executed_count":1},{"fqn":"/Community Queries/Postgres/Administrative Queries/Running Queries and Lock Statuses","id":"4f310eb9-d46c-430b-a585-d6cac0281aa6","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Running Queries and Lock Statuses","entity_type":"SQL_ENTITY","description":"","content":"SELECT\r\n  S.pid,\r\n  age(clock_timestamp(), query_start),\r\n  usename,\r\n  query,\r\n  L.mode,\r\n  L.locktype,\r\n  L.granted\r\nFROM \r\n  pg_stat_activity S\r\n  inner join pg_locks L on S.pid = L.pid \r\norder by \r\n  L.granted, L.pid DESC","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.869Z","executed_count":1},{"fqn":"/Community Queries/Postgres/Administrative Queries/List users","id":"55af314b-2fc8-41e5-847f-f68abb52e00f","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"List users","entity_type":"SQL_ENTITY","description":"","content":"select \r\n  *\r\nfrom \r\n  pg_user","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.866Z","executed_count":1},{"fqn":"/Community Queries/Postgres/Administrative Queries/Databases actual size","id":"6635926d-f297-4446-b6cc-a4751d34f065","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Databases actual size","entity_type":"SQL_ENTITY","description":"","content":"select \r\n  datname as \"Database\",\r\n  pg_size_pretty(pg_database_size(datname)) as \"Size\"\r\nfrom \r\n  pg_database\r\norder by \r\n  pg_database_size(datname) desc","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.852Z","executed_count":1},{"fqn":"/Community Queries/Postgres/Administrative Queries/Kill all connections of a current databse","id":"7ce5e51e-6164-403a-9f4f-6d71e30daa63","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Kill all connections of a current databse","entity_type":"SQL_ENTITY","description":"","content":"SELECT\r\n  pg_terminate_backend(pg_stat_activity.pid)\r\nFROM \r\n  pg_stat_activity\r\nWHERE \r\n  datname = current_database()  \r\n  AND pid <> pg_backend_pid()","type":"QUERY","platform":"Snowflake","executed_count":0},{"fqn":"/Community Queries/Postgres/Administrative Queries/Server configuration","id":"b43551a5-8de0-48c4-a789-57d00ec700b4","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Server configuration","entity_type":"SQL_ENTITY","description":"","content":"SHOW ALL","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.876Z","executed_count":1},{"fqn":"/Community Queries/Postgres/Administrative Queries/Unused Indexes","id":"bc1f5305-89d8-4b60-8299-5aeef9aa4ebe","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Unused Indexes","entity_type":"SQL_ENTITY","description":"","content":"SELECT \r\n  relname AS table_name, \r\n  indexrelname AS index_name, \r\n  pg_size_pretty(pg_relation_size(indexrelname::regclass)) index_size\r\nFROM \r\n  pg_stat_all_indexes\r\nWHERE \r\n  schemaname = 'public'\r\n  AND idx_scan = 0\r\n  AND idx_tup_read = 0\r\n  AND idx_tup_fetch = 0\r\nORDER BY \r\n  pg_relation_size(indexrelname::regclass) DESC","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.881Z","executed_count":1},{"fqn":"/Community Queries/Postgres","id":"c048a844-c0a9-4810-b773-63e8bebf8232","parent_folder_id":"067ce53b-d1d2-431a-9f3d-4765eb18eebf","name":"Postgres","entity_type":"FOLDER"},{"fqn":"/Community Queries/Postgres/Administrative Queries/Is autovacuum running?","id":"e8826a4c-7b0b-4c3a-a1f3-7e5634c4adc8","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Is autovacuum running?","entity_type":"SQL_ENTITY","description":"","content":"SELECT name, setting FROM pg_settings WHERE name='autovacuum'","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.860Z","executed_count":1},{"fqn":"/Community Queries/Postgres/Administrative Queries","id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","parent_folder_id":"c048a844-c0a9-4810-b773-63e8bebf8232","name":"Administrative Queries","entity_type":"FOLDER"},{"fqn":"/Community Queries/Postgres/Administrative Queries/Current sessions and their queries","id":"f9c009c7-4b29-4af9-99f6-fec3f7e564b3","parent_folder_id":"f98d0d4e-b2ef-4e8a-a42b-307395cfb0d2","name":"Current sessions and their queries","entity_type":"SQL_ENTITY","description":"","content":"select\r\n\tpid,\r\n  usename as \"User Name\",\r\n\tclient_addr as \"Client IP address\",\r\n\tapplication_name,\r\n  query_start as \"Started at\",\r\n\t(clock_timestamp() - query_start) as \"Duration\",\r\n  state as \"State\",\r\n\tquery as Query\r\nfrom\r\n\tpg_stat_activity\r\norder by \r\n  query_start desc","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-16T10:22:50.847Z","executed_count":1}]}